{% extends "wagtailadmin/skeleton.html" %}
{% load wagtailadmin_tags wagtailcore_tags i18n wagtailshell_tags %}

{% block furniture %}
    <div id="wagtailshell-root" data-initial-response="{{ data }}">
        {% include 'wagtailshell/sidebar.html' %}
    </div>
    <script>
        window.csrfToken = '{{ csrf_token|escapejs }}';
    </script>
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% versioned_static 'wagtailadmin/css/core.css' %}" type="text/css" />
{% endblock %}

{% block branding_favicon %}
    <link rel="shortcut icon" href="{% versioned_static 'wagtailadmin/images/favicon.ico' %}" />
{% endblock %}

{% block js %}
    <script>
        (function(document, window) {
            window.wagtailConfig = window.wagtailConfig || {};
            wagtailConfig.ADMIN_API = {
                PAGES: '{% url "wagtailadmin_api:pages:listing" %}',
                DOCUMENTS: '{% url "wagtailadmin_api:documents:listing" %}',
                IMAGES: '{% url "wagtailadmin_api:images:listing" %}',
                {# // Use this to add an extra query string on all API requests. #}
                {# // Example value: '&order=-id' #}
                EXTRA_CHILDREN_PARAMETERS: '',
            };

            {% i18n_enabled as i18n_enabled %}
            {% locales as locales %}
            wagtailConfig.I18N_ENABLED = {% if i18n_enabled %}true{% else %}false{% endif %};
            wagtailConfig.LOCALES = {{ locales|safe }};

            wagtailConfig.STRINGS = {% js_translation_strings %};

            wagtailConfig.ADMIN_URLS = {
                PAGES: '{% url "wagtailadmin_explore_root" %}'
            };
        })(document, window);
    </script>
    <script src="{% versioned_static 'wagtailadmin/js/vendor.js' %}"></script>
    <script src="{% versioned_static 'wagtailadmin/js/wagtailadmin.js' %}"></script>

    <script src="{% url 'wagtail_shell:javascript_catalog' %}"></script>
    <script src="{% versioned_static 'wagtail_shell/js/wagtail-shell.js' %}"></script>
{% endblock %}
